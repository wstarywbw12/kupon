<!-- Slot Spinner HTML/JS Version (Single Stop Button + Light Effect + Winner List) -->
<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Slot Spinner 4 Angka</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      background: radial-gradient(circle at center, #222 0%, #000 100%);
      overflow: hidden;
    }
    .digit {
      transition: transform 0.1s ease-in-out;
    }
    .spinning {
      animation: spinAnim 0.2s linear infinite;
    }
    @keyframes spinAnim {
      0% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
      100% { transform: translateY(0); }
    }
    .particle {
      position: absolute;
      width: 8px;
      height: 8px;
      border-radius: 50%;
      opacity: 0.9;
      pointer-events: none;
    }
    .light-ring {
      position: absolute;
      inset: -30px;
      border-radius: 9999px;
      border: 10px solid transparent;
      border-top-color: gold;
      border-right-color: orange;
      border-bottom-color: red;
      border-left-color: yellow;
      animation: spinLights 2s linear infinite;
      filter: drop-shadow(0 0 8px gold);
      z-index: -1;
    }
    @keyframes spinLights {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
  </style>
</head>
<body class="min-h-screen flex items-center justify-center">
  <div class="flex gap-8 items-start">
    <!-- Slot Machine -->
    <div class="relative bg-gray-900 p-8 rounded-2xl shadow-2xl w-full max-w-lg text-center overflow-hidden">
      <div class="light-ring"></div>
      <h1 class="text-3xl font-extrabold mb-3 text-yellow-300 drop-shadow">üé∞ Slot Spinner</h1>
      <p class="text-gray-400 mb-6">Acak 4 angka dan rasakan sensasi lampu kasino!</p>

      <div id="slot" class="flex justify-center gap-4 mb-6">
        <div class="reel bg-gray-100 border-4 border-yellow-400 w-20 h-28 rounded-xl flex items-center justify-center text-5xl font-mono font-bold text-gray-800">0</div>
        <div class="reel bg-gray-100 border-4 border-yellow-400 w-20 h-28 rounded-xl flex items-center justify-center text-5xl font-mono font-bold text-gray-800">0</div>
        <div class="reel bg-gray-100 border-4 border-yellow-400 w-20 h-28 rounded-xl flex items-center justify-center text-5xl font-mono font-bold text-gray-800">0</div>
        <div class="reel bg-gray-100 border-4 border-yellow-400 w-20 h-28 rounded-xl flex items-center justify-center text-5xl font-mono font-bold text-gray-800">0</div>
      </div>

      <div class="flex justify-center gap-3 mb-6">
        <button id="spinBtn" class="bg-rose-600 text-white px-6 py-3 rounded-lg hover:bg-rose-700 font-semibold shadow">Spin</button>
        <button id="stopBtn" class="bg-gray-300 hover:bg-gray-400 text-black px-6 py-3 rounded-lg font-semibold shadow">Stop</button>
      </div>

      <div id="result" class="text-2xl font-mono font-bold text-yellow-300">0000</div>

      <audio id="spinSound" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_01b343b690.mp3?filename=spinning-slot-machine-1.mp3"></audio>
      <audio id="stopSound" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_5c1c918a17.mp3?filename=click-124467.mp3"></audio>
    </div>

    <!-- Winner List -->
    <div class="bg-gray-800 p-6 rounded-2xl shadow-xl w-64 h-[480px] overflow-y-auto text-white">
      <h2 class="text-xl font-bold text-yellow-300 mb-3 text-center">üèÜ Pemenang</h2>
      <ul id="winnerList" class="space-y-2 text-sm"></ul>
    </div>
  </div>

  <script>
    const reels = document.querySelectorAll('.reel');
    const spinBtn = document.getElementById('spinBtn');
    const stopBtn = document.getElementById('stopBtn');
    const result = document.getElementById('result');
    const spinSound = document.getElementById('spinSound');
    const stopSound = document.getElementById('stopSound');
    const winnerList = document.getElementById('winnerList');

    let intervals = [];

    function randomDigit() {
      return Math.floor(Math.random() * 10);
    }

    function spinAll() {
      spinSound.currentTime = 0;
      spinSound.play();
      reels.forEach((reel, i) => {
        reel.classList.add('spinning');
        intervals[i] = setInterval(() => {
          reel.textContent = randomDigit();
        }, 60 + i * 20);
      });
      stopBtn.disabled = false;
      spinBtn.disabled = true;
    }

    function stopAll() {
      intervals.forEach((intv, i) => {
        clearInterval(intv);
        reels[i].classList.remove('spinning');
      });
      intervals = [];
      stopSound.currentTime = 0;
      stopSound.play();
      showConfetti();
      const finalCode = updateResult();
      addWinner(finalCode);
      stopBtn.disabled = true;
      spinBtn.disabled = false;
    }

    function updateResult() {
      const current = Array.from(reels).map(r => r.textContent).join('');
      result.textContent = current;
      return current;
    }

    function addWinner(code) {
      const li = document.createElement('li');
      const date = new Date().toLocaleTimeString('id-ID', { hour: '2-digit', minute: '2-digit', second: '2-digit' });
      li.innerHTML = `<span class='text-yellow-400 font-mono'>${code}</span> <span class='text-gray-400 text-xs'>(${date})</span>`;
      winnerList.prepend(li);
    }

    function showConfetti() {
      for (let i = 0; i < 30; i++) {
        const p = document.createElement('div');
        p.className = 'particle';
        p.style.left = window.innerWidth / 2 + 'px';
        p.style.top = window.innerHeight / 2 + 'px';
        p.style.background = `hsl(${Math.random() * 360}, 100%, 60%)`;
        document.body.appendChild(p);

        const xMove = (Math.random() - 0.5) * 400;
        const yMove = (Math.random() - 0.5) * 400;
        p.animate([
          { transform: 'translate(0,0)', opacity: 1 },
          { transform: `translate(${xMove}px, ${yMove}px)`, opacity: 0 }
        ], { duration: 1000 + Math.random() * 500, easing: 'ease-out' });

        setTimeout(() => p.remove(), 1200);
      }
    }

    spinBtn.addEventListener('click', spinAll);
    stopBtn.addEventListener('click', stopAll);
  </script>
</body>
</html>
